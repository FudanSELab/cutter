<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <title>Split Schema</title>

    <script src="lib/jquery/jquery.min.js"></script>
    <script src="lib/angular/angular.js"></script>
    <script src="lib/angular/ngDraggable.js"></script>
    <script src="lib/angular/angular-route.js"></script>
    <script src="lib/semantic/semantic.js"></script>

    <script src="js/app.js"></script>
    <script src="js/controller/cut-controller.js"></script>

    <link rel="stylesheet" href="lib/semantic/semantic.css">
    <link rel="stylesheet" href="css/index.css">

</head>

<body ng-app="cut-app" ng-controller="CutCtrl">


<div class="ui container">
    <div class="ui large top fixed menu teal inverted">
        <div class="ui container">
            <a class="active item">Split Schema</a>
        </div>
    </div>

    <div class="ui main container">
        <div class="ui grid container">


            <div class="row">
                <div class="nine wide column">

                    <div class="row">
                        <div class="ui red large label">
                            <i class="dollar icon"></i>Cost:
                        </div>
                        <div class="ui orange large label" style="cursor: pointer" ng-click="showSplitDetail(1)">
                            Sql
                            <div class="detail">{{cost.splitNum[0]}}</div>
                        </div>
                        <div class="ui yellow large label" style="cursor: pointer" ng-click="showSplitDetail(2)">
                            Method
                            <div class="detail">{{cost.splitNum[1]}}</div>
                        </div>

                        <div class="ui olive large label" style="cursor: pointer" ng-click="showSplitDetail(3)">
                            Class
                            <div class="detail">{{cost.splitNum[2]}}</div>
                        </div>
                    </div>

                    <!--////////////////////////model begin/////////////////////////////-->
                    <div class="ui modal split-modal-sql">
                        <div class="header">Sql to Split</div>
                        <div class="content" style="max-height: 500px;overflow-y: scroll">
                            <table class="ui striped table">
                                <thead>
                                    <tr>
                                        <th>Sql</th>
                                        <th>MicroService Nums</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr ng-repeat="(key, val) in cost.sqlToSplit">
                                        <td>{{key}}</td>
                                        <td>{{val}}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="ui modal split-modal-method">
                        <div class="header">Method to Split</div>
                        <div class="content" style="max-height: 500px;overflow-y: scroll">
                            <table class="ui striped table">
                                <thead>
                                <tr>
                                    <th>Method</th>
                                    <th>MicroService Nums</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr ng-repeat="(key, val) in cost.methodToSplit">
                                    <td>{{key}}</td>
                                    <td>{{val}}</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="ui modal split-modal-class">
                        <div class="header">Class to Split</div>
                        <div class="content" style="max-height: 500px;overflow-y: scroll">
                            <table class="ui striped table">
                                <thead>
                                <tr>
                                    <th>Class</th>
                                    <th>MicroService Nums</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr ng-repeat="(key, val) in cost.classToSplit">
                                    <td>{{key}}</td>
                                    <td>{{val}}</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <!--//////////////////////model end///////////////////////-->

                    <div class="row service-group" ng-repeat="(key, value) in proposalGroups" >
                        <div class="ui segment" >
                            <a class="ui teal ribbon label large">Microservice {{key}}</a>
                            <div class="label-content">
                                <span ng-drop="true" ng-drop-success="onDropComplete(key,$data)" ng-repeat="table in value">
                                    <a class="ui grey tag label table-label" ng-drag="true" ng-drag-data="{{table}}">
                                        {{table.tableName}}
                                    </a>
                                </span>
                            </div>

                        </div>
                    </div>

                </div>


                <div class="six wide right column">

                    <div class="row" style="margin-bottom: 1em;">
                        <button class="ui compact labeled icon blue right floated button" ng-click="startSplit()">
                            <i class="play icon"></i>
                            Run
                        </button>
                        <div style="clear: both"></div>
                    </div>

                    <!--拆分粒度调整-->
                    <div class="row" style="margin-bottom: 1em">
                        <div class="ui card teal" style="width:100%">
                            <div class="content">
                                <a class="ui teal ribbon big label" style="margin-bottom: 1em">Adjust Granularity</a>

                                <div class="row">
                                    <div class="ui teal disabled progress">
                                        <div class="bar"></div>
                                    </div>
                                    <button class="ui red icon mini disabled button"><i class="minus icon"></i></button>
                                    <button class="ui green icon right floated mini disabled button"><i class="add icon"></i></button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!--共享表-->
                    <div class="row">
                        <div class="ui card teal" style="width: 100%">
                            <div class="content">

                                <a class="ui teal ribbon big label" style="margin-bottom: 1em">Sharing Table Groups</a>

                                <div class="item" ng-repeat="shareGroup in sharingTableGroups" style="margin-bottom: 1em;">
                                    <!--<a class="ui teal ribbon label"> Group {{$index + 1}} </a>-->

                                    <div class="ui icon large blue label">
                                        <i class="tag icon"></i>
                                        Group {{$index + 1}}:
                                        <i class="delete icon" ng-click="deleteSharingGroup($index)"></i>
                                    </div>

                                    <div>
                                        <a class="ui grey tag label" ng-repeat="table in shareGroup" style="margin: 1em;">{{table.tableName}}</a>
                                        <!--<button class="ui icon mini right floated circular button" ng-click="deleteSharingGroup($index)">-->
                                            <!--<i class="delete icon"></i>-->
                                        <!--</button>-->
                                    </div>
                                </div>

                                <div class="divider"></div>
                                <div class="item">
                                    <h4 class="ui horizontal divider header" style="color:#007C77 ">
                                        Add Sharing Group
                                    </h4>

                                    <div class="ui multiple dropdown teal" id="shareDropdown" style="color:#00B5AD;">
                                        <span class="text"></span>
                                        <button class="ui icon small teal button">
                                            <i class="add icon"></i>
                                        </button>
                                        <div class="menu">
                                            <div class="scrolling menu">
                                                <div class="item" data-value="{{table.id}}" ng-repeat="table in notSharingTables">
                                                    <div class="ui teal empty circular label"></div>
                                                    {{table.tableName}}
                                                </div>
                                            </div>
                                        </div>

                                    </div>

                                    <div style="margin-top: 1em">
                                        <div class="ui large right floated mini buttons">
                                            <button class="ui teal button" ng-click="addSharingGroup()">Add</button>
                                            <div class="or"></div>
                                            <button class="ui button" ng-click="cancelSharingGroup()">Cancel</button>
                                        </div>
                                    </div>

                                </div>

                            </div>
                        </div>
                    </div>



                </div>
            </div>

        </div>

        <div class="ui active dimmer">
            <div class="ui large loader"></div>
        </div>

    </div>

</div>

    <!--<div ng-view style="float: right;height:100%;width:90%;background-color: #f1f2f7; overflow: scroll;"></div>-->

</body>

</html>